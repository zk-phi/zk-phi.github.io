<!doctypehtml><html lang="ja"><title>zk-phi の部屋 :: 最近の活動</title><meta charset="utf-8"><meta name="viewport"content="initial-scale=1"><meta name="description"content="zk-phi のホームページです"><link rel="preload"href="/fonts/DotGothic16-Regular.woff2"as="font"crossorigin><link rel="stylesheet"href="/css/font.css"><link rel="stylesheet"href="/css/common_critical.css"><link rel="stylesheet"href="/css/activity.css"><script defer src="/js/loader.js"></script><style></style><body id="body"><div id="content"><h1 id="title"><span class="rot">💻</span>最近の活動<span class="rot">💻</span></h1><p><a class="link"href="javascript:history.back()">&lt; 戻る</a><hr><div id="article"class="left"><h2 class="header">GFM Spec を読む - zk_phi PUBLIC scrapbox - Scrapbox</h2><div class="right"><p>Scrapbox (2021/4/28)<a class="link"target="_blank"rel="noreferrer"href="https://scrapbox.io/zkphi/GFM_Spec_%E3%82%92%E8%AA%AD%E3%82%80">See original</a></div><div id="cdata"><span><a href="https://scrapbox.io/zkphi/WYSIWYG">WYSIWYG</a></span><span>な</span><span><a href="https://scrapbox.io/zkphi/Markdown">Markdown</a></span><span>エディタを</span><span><a href="https://scrapbox.io/zkphi/Emacs">Emacs</a></span><span>上に実装しようと思って途中まで</span><span><a href="https://scrapbox.io/zkphi/%E4%BB%95%E6%A7%98">仕様</a></span><span>を読んだ時のメモ</span><br><br>1〜2.<br><br><span><a href="https://scrapbox.io/zkphi/%E6%80%9D%E6%83%B3">思想</a></span><span>の話</span><br><span><span>&nbsp;</span><span>なぜ</span><span><a href="https://scrapbox.io/zkphi/%E4%BB%95%E6%A7%98">仕様</a></span><span>を決めるのか</span></span><br><span><span>&nbsp;</span><span><a href="https://scrapbox.io/zkphi/Markdown">Markdown</a></span><span>はブロックの</span><span><a href="https://scrapbox.io/zkphi/%E3%83%84%E3%83%AA%E3%83%BC">ツリー</a></span><span>でできている</span></span><br><span><span>&nbsp;</span>空行とスペースのみの行を区別しない</span><br><span><span>&nbsp;</span><span><a href="https://scrapbox.io/zkphi/GFM">GFM</a></span><span>は common mark の strict superset である</span></span><br><span><span>&nbsp;</span>とか</span><br><br>3.<br><br>文字セットの話 (なにを whitespace とみなすかとか)。面白いのは TAB の扱いくらいかなあ。<br><span><span>&nbsp;</span>TAB は 4 文字スペースと等価だけど、htmlになるときはTABのまま</span><br><span><span>&nbsp;</span>「スペース一つ」が要求される場所にTABを使うと、要求されたスペース一つ＋余ったスペース3つに解体される</span><br><br>4. leaf blocks (他のブロックをネストできないブロック)<br>4.1 水平線<br><br><span><span>&nbsp;</span>水平線は 3 文字までインデントできるが、 4 文字になるとコードブロックが優先</span><br><span><span>&nbsp;</span><span>文字間にはいくつ空白を挟んでもいい (</span><span>- - -</span><span>)</span></span><br><span><span>&nbsp;</span>行末の空白はいくつあっても良い</span><br><span><span>&nbsp;</span>水平線を構成しない文字を同じ行に入れてはいけない</span><br><span><span>&nbsp;</span><span>水平線を構成する文字が混在してはいけない、たとえば</span><span>*_*</span><span>はイタリック体のアンダースコア</span></span><br><span><span>&nbsp;</span>前後に空行は不要</span><br><span><span>&nbsp;</span>ただし setext 形式の heading に当てはまる場合はそちらが優先</span><br><span><span>&nbsp;</span>リストよりは水平線が優先</span><br><span><span>&nbsp;&nbsp;</span>code:list-and-hr</span><br><span><span>&nbsp;&nbsp;&nbsp;</span>* hoge</span><br><span><span>&nbsp;&nbsp;&nbsp;</span>* * *</span><br><span><span>&nbsp;&nbsp;&nbsp;</span>* piyo</span><br><br>4.2 atx heading<br><br><span><span>&nbsp;</span><span>7個以上並ぶ</span><span>#</span><span>はただのテキスト(h7は存在しない)</span></span><br><span><span>&nbsp;</span><span>#</span><span>の直後は空白か newline</span></span><br><span><span>&nbsp;</span><span>任意の個数の閉じ</span><span>#</span><span>があってもいい (出力されない)</span></span><br><span><span>&nbsp;</span>3 文字まではインデントしても良いが、 4 文字になるとコードブロック</span><br><span><span>&nbsp;</span>中にインライン要素を含むことはできる</span><br><span><span>&nbsp;</span><span>開き</span><span>#</span><span>直後、閉じ</span><span>#</span><span>の直前にある空白は無視</span></span><br><span><span>&nbsp;</span><span>閉じ</span><span>#</span><span>より後ろの空白も無視</span></span><br><br>4.3 setext heading<br><br><span><span>&nbsp;</span>ややこしいので省略</span><br><br>4.4 indented code block<br><br><span><span>&nbsp;</span>4 文字以上インデントされた行、または空行 (スペースは ok) からなる一連のカタマリはコードブロック</span><br><span><span>&nbsp;</span>先頭からインデント 4 文字を取り除いたものがコードブロックのコンテンツになる</span><br><span><span>&nbsp;</span>コードブロックの前には空行が必要だが、後ろはいらない場合もある</span><br><span><span>&nbsp;&nbsp;</span>code:codeblock-and-newlines</span><br><span><span>&nbsp;&nbsp;&nbsp;</span>hogehoge</span><br><span><span>&nbsp;&nbsp;&nbsp;</span></span><br><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>code</span><br><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>block</span><br><span><span>&nbsp;&nbsp;&nbsp;</span>fugafuga</span><br><span><span>&nbsp;</span>heading や hr の直後も空行はいらない</span><br><span><span>&nbsp;</span>4 文字インデントされていても、リストだった場合はコードブロックではない</span><br><span><span>&nbsp;&nbsp;</span>code:codeblock-and-lists</span><br><span><span>&nbsp;&nbsp;&nbsp;</span>- hoge</span><br><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>- hoge1</span><br><span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>- hoge2</span><br><span><span>&nbsp;&nbsp;&nbsp;</span>- fuga</span><br><span><span>&nbsp;</span>コードブロックの中には他の要素を (インライン要素も) 入れられない</span><br><span><span>&nbsp;</span>スペースのみからなる行は空行なので、スペース 4 つを並べただけの行はコードブロックの 1 行目にはならない</span><br><br>4.5 code fence<br><br><span><span>&nbsp;</span>バッククォートまたはチルダ 3 つ「以上」並べたものは code fence</span><br><span><span>&nbsp;</span>code fence と code fence の間はブロック (fenced code block) として扱われる</span><br><span><span>&nbsp;</span>code fence 自体も 3 文字までインデントできる (4 文字以上は通常の codeblock)</span><br><span><span>&nbsp;&nbsp;</span>その場合、code fence の中身の各行からも同じだけのインデントが除去される</span><br><span><span>&nbsp;&nbsp;</span>中身のインデントが足りなかった場合も 0 インデントとして扱って、code block は継続</span><br><span><span>&nbsp;&nbsp;</span>閉じ fence は同じだけインデントされていても、いなくてもいい</span><br><span><span>&nbsp;</span>閉じ code fence がない場合はドキュメントの終わりまで (これには準拠しない方がよさそう)</span><br><span><span>&nbsp;</span>code fence の中身の先頭行は空行にもなりうる</span><br><span><span>&nbsp;</span>空の code block もありうる</span><br><span><span>&nbsp;</span>開き code fence の直後から行末までに文字がある場合、それは info string</span><br><span><span>&nbsp;&nbsp;</span>ただし info string がバッククォートを含む場合は、インライン要素のバッククォートが優先</span><br><span><span>&nbsp;&nbsp;</span>(パフォーマンスの都合、空の info string は認めないのがよさそう)</span><br><span><span>&nbsp;&nbsp;</span>info string の先頭末尾の空白は無視</span><br><span><span>&nbsp;</span>code fence と、同じ code fence の間が fenced code のコンテンツ</span><br><span><span>&nbsp;</span>開き code fence が N 文字で構成されていた場合、閉じ code fence は N 文字以上でなければいけない</span><br><span><span>&nbsp;</span>閉じ code fence の後ろは空白と改行のみ</span><br><span><span>&nbsp;</span><span>fence は hr のように空白を含まない (</span><span>~ ~ ~</span><span>はだめ)</span></span><br><span><span>&nbsp;</span>fence の前後に空行は不要</span><br><span><span>&nbsp;</span>info string は言語名として扱う</span><br><span><span>&nbsp;&nbsp;</span>(qiita だと 言語:ファイル名 と書ける)</span><br><br>4.6 html blocks<br><br>html リテラルの開始・終了条件とか。厄介なのでいったん省略<br><br>4.7 link reference definitions<br><br><span><span>&nbsp;</span>url に名前をつけて、あとで役立てるためのもの</span><br><span><span>&nbsp;</span><span>[link label]: url &quot;title&quot;</span><span>の形をしているもの、3 文字まではインデント可能</span></span><br><span><span>&nbsp;&nbsp;</span>definition の後ろは空白と改行のみ</span><br><span><span>&nbsp;</span>コロンと url、url と title の間はそれぞれ 0 個以上の空白を入れられる (入れなくても良い)</span><br><span><span>&nbsp;</span>改行もそれぞれの隙間に一つづつまでなら入れて良い (これは対応しなくてもよさそう)</span><br><span><span>&nbsp;</span>title は中で改行される場合もあるが、空行は含まない</span><br><span><span>&nbsp;</span>それぞれのコンポーネントの細かいシンタックスはあとで出てくる link を参照</span><br><span><span>&nbsp;</span>マッチするものが複数ある場合は、先頭のものを採用 (これは実装しなくてよさそう)</span><br><span><span>&nbsp;</span>文中に書く場合は前後に空行が必要。hr などの直後に書く場合は不要</span><br><br>4.8 paragraphs<br><br><span><span>&nbsp;</span>段落</span><br><span><span>&nbsp;</span>「前後に空行を要求しないブロック要素」または空行で区切られた一連の文字列</span><br><span><span>&nbsp;</span>行頭行末の空白は無視</span><br><span><span>&nbsp;</span>コードブロックは前に空行を要求するので、段落の途中の行頭のインデントは 4 文字以上でも良い。</span><br><br>4.9 blanklines<br><br><span><span>&nbsp;</span>ブロック要素を区切る。リストの tightness (後述？) を決める</span><br><span><span>&nbsp;</span>ファイル先頭末尾の空行は無視される</span><br><br>4.10 tables 【GFM拡張】<br><br><span><span>&nbsp;</span>ヘッダ行、デリミタ行と、残りの 0 行以上のデータ行からなる。</span><br><span><span>&nbsp;</span><span>ヘッダ行、データ行は</span><span>|</span><span>で区切られたテキストの並び</span></span><br><span><span>&nbsp;&nbsp;</span><span>行頭行末の</span><span>|</span><span>は必須ではないが、あいまいさを生じるので推奨</span></span><br><span><span>&nbsp;&nbsp;</span><span>|</span><span>とテキストの間の空白は無視される</span></span><br><span><span>&nbsp;</span><span>デリミタ行はすべてのテキストがそれぞれ一つ以上の</span><span>-</span><span>であるような行</span></span><br><span><span>&nbsp;&nbsp;</span><span>テキストの左右中央揃えを表現するために、</span><span>-</span><span>の先頭末尾にそれぞれ</span><span>:</span><span>をつけても良い</span></span><br><span><span>&nbsp;&nbsp;</span><span>-</span><span>や空白文字の数は適当で良い</span></span><br><span><span>&nbsp;</span>(縦棒のエスケープ考慮するの厄介そう)</span><br><span><span>&nbsp;</span>直後に空行は不要</span><br><span><span>&nbsp;</span>ヘッダ行とデリミタ行のセルの数は一致している必要がある</span><br><span><span>&nbsp;</span>データ行は適宜末尾に空セルが挿入されたり、溢れたセルが捨てられたりする</span><br><br>5. containers<br><br><span><span>&nbsp;</span>中に別の container や leaf block を含むことができる block</span><br><span><span>&nbsp;</span>本質的に再帰的なので、「 X がブロック (の列) ならば、こういう風に X を変形することで、これを X をそのコンテンツとするコンテナ Y にできる」のように再帰的に定義する</span><br></div></div><hr><p><a class="link"href="javascript:history.back()">&lt; 戻る</a></div><script>const lazyScripts=["/js/prefetch.js","/js/stalker.js","/js/activity.js"],lazyStyles=["/css/common.css","/css/stalker.css"]</script>